"use strict";(self.webpackChunkreact_native_reanimated_docs=self.webpackChunkreact_native_reanimated_docs||[]).push([[9305],{7136:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>m});var a=n(7462),r=(n(7294),n(3905));const i={id:"sharedElementTransitions",title:"Shared Element Transitions",sidebar_label:"Shared Element Transitions"},o=void 0,s={unversionedId:"api/sharedElementTransitions",id:"api/sharedElementTransitions",title:"Shared Element Transitions",description:"Shared Element Transitions is an experimental feature, not recommended for production use yet. We are waiting for your feedback to improve implementation.",source:"@site/docs/api/SharedElementTransitions.md",sourceDirName:"api",slug:"/api/sharedElementTransitions",permalink:"/reanimated-legacy-docs/docs/api/sharedElementTransitions",draft:!1,tags:[],version:"current",frontMatter:{id:"sharedElementTransitions",title:"Shared Element Transitions",sidebar_label:"Shared Element Transitions"},sidebar:"docs",previous:{title:"Layout Transitions",permalink:"/reanimated-legacy-docs/docs/api/LayoutAnimations/layoutTransitions"},next:{title:"measure",permalink:"/reanimated-legacy-docs/docs/api/nativeMethods/measure"}},l={},m=[{value:"How to use it?",id:"how-to-use-it",level:2},{value:"Custom animation",id:"custom-animation",level:2},{value:"Examples",id:"examples",level:2},{value:"Limitation and known issues",id:"limitation-and-known-issues",level:2},{value:"Plans for future",id:"plans-for-future",level:2}],c={toc:m};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Shared Element Transitions is an experimental feature, not recommended for production use yet. We are waiting for your feedback to improve implementation.")),(0,r.kt)("p",null,"A Shared Element Transition allows you to smoothly transform a component from one screen into a component on another screen. When Reanimated detects that a component with a ",(0,r.kt)("inlineCode",{parentName:"p"},"sharedTransitionTag")," is being mounted or unmounted, it tries to find the last registered view with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"sharedTransitionTag"),". If it finds two matching components, it takes a snapshot of the styles for both components, and both shared views are detached from their parent and attached to a temporary transition container for the duration of the animation. After the animation is complete, they are attached back to their original parent. If you do not create a custom animation, all snapshot properties, including ",(0,r.kt)("inlineCode",{parentName:"p"},"width"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"height"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"originX"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"originY"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"transformMatrix"),", are animated by default with a duration of 500ms using the ",(0,r.kt)("inlineCode",{parentName:"p"},"withTiming")," animation."),(0,r.kt)("h2",{id:"how-to-use-it"},"How to use it?"),(0,r.kt)("p",null,"To create a shared transition animation between two components on different screens, simply assign the same ",(0,r.kt)("inlineCode",{parentName:"p"},"sharedTransitionTag")," to both components. When you navigate between screens, the shared transition animation will automatically play. The shared transition feature works by searching for two components that have been registered with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"sharedTransitionTag"),". If you want to use more than one shared view on the same screen, be sure to assign a unique shared tag to each component."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Screen A")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"{2}","{2}":!0},"<View\n  sharedTransitionTag=\"sharedTag\"\n  style={{ width: 150, height: 150, backgroundColor: 'green' }}\n/>\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Screen B")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"{2}","{2}":!0},"<View\n  sharedTransitionTag=\"sharedTag\"\n  style={{ width: 100, height: 100, backgroundColor: 'green' }}\n/>\n")),(0,r.kt)("h2",{id:"custom-animation"},"Custom animation"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"You need to create custom transition with Reanimated API, for example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { SharedTransition } from 'react-native-reanimated';\nconst transition = SharedTransition.custom((values) => {\n  'worklet';\n  return {\n    height: withSpring(values.targetHeight),\n    width: withSpring(values.targetWidth),\n  };\n});\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"You need to add custom transition as ",(0,r.kt)("inlineCode",{parentName:"li"},"sharedTransitionStyle")," prop to your both components (on both screens):")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"{2,3}","{2,3}":!0},"<View\n  sharedTransitionTag=\"reanimatedTransition\"\n  sharedTransitionStyle={transition}\n  style={{ backgroundColor: 'blue', width: 200, height: 100 }}\n/>\n")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"More examples of usage you can find in ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"https://github.com/software-mansion/react-native-reanimated/tree/3.3.0/app/src/examples/SharedElementTransitions"},"Reanimated Example App")),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"{14,26}","{14,26}":!0},"import * as React from 'react';\nimport { View, Button } from 'react-native';\nimport { createNativeStackNavigator } from '@react-navigation/native-stack';\nimport { NavigationContainer } from '@react-navigation/native';\nimport Animated from 'react-native-reanimated';\n\nconst Stack = createNativeStackNavigator();\n\nfunction Screen1({ navigation }) {\n  return (\n    <View style={{ flex: 1 }}>\n      <Animated.View\n        style={{ width: 150, height: 150, backgroundColor: 'green' }}\n        sharedTransitionTag=\"sharedTag\"\n      />\n      <Button title=\"Screen2\" onPress={() => navigation.navigate('Screen2')} />\n    </View>\n  );\n}\n\nfunction Screen2({ navigation }) {\n  return (\n    <View style={{ flex: 1, marginTop: 50 }}>\n      <Animated.View\n        style={{ width: 100, height: 100, backgroundColor: 'green' }}\n        sharedTransitionTag=\"sharedTag\"\n      />\n      <Button title=\"Screen1\" onPress={() => navigation.navigate('Screen1')} />\n    </View>\n  );\n}\n\nexport default function SharedElementExample() {\n  return (\n    <NavigationContainer>\n      <Stack.Navigator screenOptions={{ headerShown: true }}>\n        <Stack.Screen name=\"Screen1\" component={Screen1} />\n        <Stack.Screen name=\"Screen2\" component={Screen2} />\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n}\n")),(0,r.kt)("h2",{id:"limitation-and-known-issues"},"Limitation and known issues"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Only the native stack is supported."),(0,r.kt)("li",{parentName:"ul"},"You can only animate ",(0,r.kt)("inlineCode",{parentName:"li"},"width"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"height"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"originX"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"originY"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"transformMatrix")," properties when using the shared transition."),(0,r.kt)("li",{parentName:"ul"},"The layout for shared view children is not computed during the transition."),(0,r.kt)("li",{parentName:"ul"},"The current implementation supports only the old React Native architecture (Paper)")),(0,r.kt)("h2",{id:"plans-for-future"},"Plans for future"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Enable the animation of all possible styles during a shared transition."),(0,r.kt)("li",{parentName:"ul"},"Calculate the layout for shared view children during the transition."),(0,r.kt)("li",{parentName:"ul"},"Add possibility to implement own screen transition with a customized animation for screen changes."),(0,r.kt)("li",{parentName:"ul"},"Allow shared transition to work for components located within the same screen."),(0,r.kt)("li",{parentName:"ul"},"Create a progress-based transition animation that can be controlled by swiping back (iOS only)."),(0,r.kt)("li",{parentName:"ul"},"Support for the new React Native architecture (Fabric)")))}p.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=m(n),u=r,h=d["".concat(l,".").concat(u)]||d[u]||p[u]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var m=2;m<i;m++)o[m]=n[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);