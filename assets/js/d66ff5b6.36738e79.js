"use strict";(self.webpackChunkreact_native_reanimated_docs=self.webpackChunkreact_native_reanimated_docs||[]).push([[7160],{870:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>v,contentTitle:()=>f,default:()=>y,frontMatter:()=>b,metadata:()=>N,toc:()=>E});var n=a(7462),r=a(7294),l=a(3905);const i="width10_eFRB",o="width20_D7dg",s="width30_Vn5T",m="cellNormal_AIiZ",c="cellNotAvailable_F3Qq";function p(){return r.createElement(r.Fragment,null,r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:s},"Tool"),r.createElement("th",{className:i},"Platform"),r.createElement("th",{className:o},"JSC"),r.createElement("th",{className:o},"Hermes"),r.createElement("th",{className:o},"V8"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{rowSpan:2},r.createElement("a",{href:"#chrome-debugger"},"Chrome debugger")),r.createElement("td",{className:m},"Android"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb9"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb9"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb9")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb9"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb9"),r.createElement("td",{className:c},"N/A")),r.createElement("tr",null,r.createElement("td",{rowSpan:2},r.createElement("a",{href:"#chrome-devtools"},"Chrome DevTools")),r.createElement("td",{className:m},"Android"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb2"),r.createElement("td",{className:m},"\u269b\ufe0f")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb2"),r.createElement("td",{className:c},"N/A")),r.createElement("tr",null,r.createElement("td",{rowSpan:2},r.createElement("a",{href:"#flipper-hermes-debugger"},"Flipper (Hermes debugger)")),r.createElement("td",{className:m},"Android"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb2"),r.createElement("td",{className:m},"\u269b\ufe0f")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705 \xb2"),r.createElement("td",{className:c},"N/A")),r.createElement("tr",null,r.createElement("td",{rowSpan:2},r.createElement("a",{href:"#safari-devtools"},"Safari DevTools")),r.createElement("td",{className:m},"Android"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:c},"N/A")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:c},"N/A")),r.createElement("tr",null,r.createElement("td",{rowSpan:2},r.createElement("a",{href:"#react-developer-tools"},"React Developer Tools")),r.createElement("td",{className:m},"Android"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:m},"\u269b\ufe0f")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:c},"N/A")))),"\xb9 - Works, but uses web implementations of functions and runs worklets on the JS thread. This means that"," ",r.createElement("a",{href:"../../api/nativeMethods/measure"},"measure")," and Layout Animations will not be available.",r.createElement("br",null),"\xb2 - Experimental feature (see description).",r.createElement("h4",{style:{marginBottom:6}},"Legend:"),r.createElement("ul",null,r.createElement("li",null,"\u269b\ufe0f \u2705 - special features for React Native apps using Reanimated"),r.createElement("li",null,"\u269b\ufe0f - works the same as with all React Native apps, debugging worklets is not available"),r.createElement("li",null,"N/A - unavailable in React Native apps")))}function d(){return r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Platform"),r.createElement("th",{className:o},"JSC"),r.createElement("th",{className:o},"Hermes"),r.createElement("th",{className:o},"V8"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:m},"Android"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:c},"N/A"))))}function u(){return r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Platform"),r.createElement("th",{className:o},"JSC"),r.createElement("th",{className:o},"Hermes"),r.createElement("th",{className:o},"V8"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:m},"Android"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:m},"\u269b\ufe0f")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:c},"N/A"))))}function h(){return r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Platform"),r.createElement("th",{className:o},"JSC"),r.createElement("th",{className:o},"Hermes"),r.createElement("th",{className:o},"V8"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:m},"Android"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:m},"\u269b\ufe0f")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:c},"N/A"))))}function g(){return r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Platform"),r.createElement("th",{className:o},"JSC"),r.createElement("th",{className:o},"Hermes"),r.createElement("th",{className:o},"V8"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:m},"Android"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:c},"N/A")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:m},"\u269b\ufe0f \u2705"),r.createElement("td",{className:c},"N/A"),r.createElement("td",{className:c},"N/A"))))}function k(){return r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Platform"),r.createElement("th",{className:o},"JSC"),r.createElement("th",{className:o},"Hermes"),r.createElement("th",{className:o},"V8"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:m},"Android"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:m},"\u269b\ufe0f")),r.createElement("tr",null,r.createElement("td",{className:m},"iOS"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:m},"\u269b\ufe0f"),r.createElement("td",{className:c},"N/A"))))}const b={id:"debugging",title:"Debugging worklets",sidebar_label:"Debugging worklets"},f=void 0,N={unversionedId:"guide/debugging",id:"version-2.x/guide/debugging",title:"Debugging worklets",description:"Due to Reanimated's unique architecture and usage of a second JS runtime, debugging",source:"@site/versioned_docs/version-2.x/guide/debugging.mdx",sourceDirName:"guide",slug:"/guide/debugging",permalink:"/react-native-reanimated/docs/2.x/guide/debugging",draft:!1,tags:[],version:"2.x",frontMatter:{id:"debugging",title:"Debugging worklets",sidebar_label:"Debugging worklets"},sidebar:"docs",previous:{title:"Testing with Jest",permalink:"/react-native-reanimated/docs/2.x/guide/testing"},next:{title:"Layout Animations",permalink:"/react-native-reanimated/docs/2.x/tutorials/LayoutAnimations/layoutAnimations"}},v={},E=[{value:"React Native debugging tools",id:"react-native-debugging-tools",level:3},{value:"The JS context vs. the UI context",id:"the-js-context-vs-the-ui-context",level:3},{value:"Debugging web apps",id:"debugging-web-apps",level:3},{value:"Summary",id:"summary",level:3},{value:"Chrome Debugger",id:"chrome-debugger",level:3},{value:"Chrome DevTools",id:"chrome-devtools",level:3},{value:"Flipper (Hermes debugger)",id:"flipper-hermes-debugger",level:3},{value:"Safari DevTools",id:"safari-devtools",level:3},{value:"React Developer Tools",id:"react-developer-tools",level:3}],w={toc:E};function y(e){let{components:t,...r}=e;return(0,l.kt)("wrapper",(0,n.Z)({},w,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Due to Reanimated's unique architecture and usage of a second JS runtime, debugging\ncan be problematic, and some common solutions might not work as expected.\nThis article summarizes all the available methods and highlights their caveats."),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"Reanimated v1 works with all the common React Native debugging tools. This\narticle focuses on the use of these tools with Reanimated v2.")),(0,l.kt)("h3",{id:"react-native-debugging-tools"},"React Native debugging tools"),(0,l.kt)("p",null,"These are the debugging tools we checked for compatibility with React Native\napps using the Reanimated library:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/debugging#chrome-developer-tools"},(0,l.kt)("strong",{parentName:"a"},"Chrome debugger")),"\n(also known as the ",(0,l.kt)("em",{parentName:"p"},"React Native Debugger"),") is a simple tool that creates a web\nworker inside your preferred browser which executes your app's JavaScript code. It works\nwith all the runtimes available in React Native.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/hermes#debugging-js-on-hermes-using-google-chromes-devtools"},(0,l.kt)("strong",{parentName:"a"},"Chrome DevTools")),"\n(unavailable for JSC) is Chrome's built-in feature that allows for connecting to a\nremote JavaScript runtime. This means that the code you are debugging actually\nruns on the device itself and behaves the same way as it would with DevTools detached.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://fbflipper.com/"},(0,l.kt)("strong",{parentName:"a"},"Flipper"))," (Hermes debugger) is an app created by\nFacebook that makes it easy to use the ",(0,l.kt)("em",{parentName:"p"},"Chrome DevTools")," while providing additional tools for\nUI inspection and debugging.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/debugging#safari-developer-tools"},(0,l.kt)("strong",{parentName:"a"},"Safari DevTools")),"\nis Safari's built-in feature that is only available for iOS devices running JSC. It works\nvery similarly to Chrome DevTools - it allows you to connect to a remote runtime\nand keep code execution on device.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/debugging#react-developer-tools"},(0,l.kt)("strong",{parentName:"a"},"React Developer Tools")),"\nare a standalone app that allows debugging UI through the inspector, as well as monitoring\nperformance and profiling your app."))),(0,l.kt)("h3",{id:"the-js-context-vs-the-ui-context"},"The JS context vs. the UI context"),(0,l.kt)("p",null,"It is important to understand the differences between the JS and UI contexts.\nOne thing to note is that adding Reanimated changes nothing when it comes\nto debugging the regular JS context that is available in all React Native apps.\nIt is only debugging the UI context, which is specific to the Reanimated\nlibrary that might be difficult to debug in some scenarios, which are all\nexplained in this article."),(0,l.kt)("p",null,"You can read more about Reanimated's architecture ",(0,l.kt)("a",{parentName:"p",href:"../fundamentals/architecture"},"here"),"."),(0,l.kt)("h3",{id:"debugging-web-apps"},"Debugging web apps"),(0,l.kt)("p",null,"For debugging web apps, you may use the tools you prefer or any that are provided\nby the browser of your choice. We did not discover any issues with debugging\napps using Reanimated on web."),(0,l.kt)("h3",{id:"summary"},"Summary"),(0,l.kt)(p,{mdxType:"SummaryTable"}),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"Remember that console logs will always appear in the primary JS runtime as the\n",(0,l.kt)("inlineCode",{parentName:"p"},"console.log")," function on the UI runtime is just a wrapper around the one from\nthe JS runtime.")),(0,l.kt)("h3",{id:"chrome-debugger"},"Chrome Debugger"),(0,l.kt)(d,{mdxType:"ChromeDebuggerTable"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Summary:"),"\nWorks, but uses web implementations of functions and runs everything on the JS thread."),(0,l.kt)("p",null,"Since the Chrome Debugger runs its own web worker, all the code is run on\nthe JS thread, and it uses the JavaScript engine provided by your web\nbrowser (V8 in Chrome, JSC in Safari and SpiderMonkey in Firefox). This\nmeans that this piece of code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function runWorklet() {\n  'worklet';\n  console.log('worklet:', _WORKLET);\n}\nrunOnUI(runWorklet)();\n")),(0,l.kt)("p",null,"would output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"LOG: worklet: false\n")),(0,l.kt)("p",null,"Another side effect is that Reanimated uses web implementations of all\nfunctions. This means that the ",(0,l.kt)("inlineCode",{parentName:"p"},"scrollTo")," function will work\n(using the native web implementation), but the ",(0,l.kt)("inlineCode",{parentName:"p"},"measure"),"\nfunction will not be available, and its usage will trigger this error:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"[Reanimated] measure() cannot be used with Chrome Debugger.\n")),(0,l.kt)("p",null,"You may still use the standard web version of ",(0,l.kt)("inlineCode",{parentName:"p"},"measure")," as described\n",(0,l.kt)("a",{parentName:"p",href:"../api/nativeMethods/measure"},"here"),"."),(0,l.kt)("p",null,"Those functions that are provided by Reanimated and do not have web\nimplementations won't work at all.\nAn example of this behavior is the ",(0,l.kt)("inlineCode",{parentName:"p"},"useAnimatedSensor")," hook,\nwhich currently only works on mobile platforms. When debugging in Chrome and using\nthis hook, the following message will appear in the logs:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"[Reanimated] useAnimatedSensor is not available on web yet.\n")),(0,l.kt)("p",null,"But despite all of this, it is still possible to set breakpoints both in\nnormal JS code and in worklets (since they run on the main JS\nthread now)."),(0,l.kt)("h3",{id:"chrome-devtools"},"Chrome DevTools"),(0,l.kt)(u,{mdxType:"ChromeDevToolsTable"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Summary:"),"\nWorks and both contexts can be debugged."),(0,l.kt)("admonition",{type:"warning"},(0,l.kt)("p",{parentName:"admonition"},"This is an early experimental feature.")),(0,l.kt)("p",null,"Worklet debugging is now available in Reanimated apps as an early experimental\nfeature. We do not recommend using Chrome DevTools to debug the UI context, but\ninstead try using the Flipper tool. It has fewer bugs and provides a much better\nexperience."),(0,l.kt)("p",null,"If you still want to use Chrome DevTools then follow these steps:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Add the ",(0,l.kt)("inlineCode",{parentName:"p"},"patch-package")," to your project and set it up to run as a ",(0,l.kt)("inlineCode",{parentName:"p"},"post-install")," task.\nMore details can be found ",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/patch-package"},"here"),".")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Add the necessary patch for ",(0,l.kt)("inlineCode",{parentName:"p"},"metro-inspector-proxy")," to the ",(0,l.kt)("inlineCode",{parentName:"p"},"patches/")," folder:"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.76.7")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(8673).Z},"here")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.76.5")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(5714).Z},"here")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.76.4")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(1585).Z},"here")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.76.0")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(4371).Z},"here")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.73.7")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(5174).Z},"here")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.73.5")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(6980).Z},"here")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.72.3")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(8849).Z},"here")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"0.72.1")," ","\u2192"," ",(0,l.kt)("a",{target:"_blank",href:a(6090).Z},"here"))),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Warnings about mismatched patch versions can be safely ignored if the patch was successfully applied.")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Open ",(0,l.kt)("a",{parentName:"p",href:"chrome://inspect"},"chrome://inspect")," in a Google Chrome browser.")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Select the Reanimated runtime from the list. The list should look something\nlike this:"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Screenshot showing Chrome DevTools target selection",src:a(258).Z,width:"818",height:"496"})),(0,l.kt)("p",null,"You may choose either ",(0,l.kt)("inlineCode",{parentName:"p"},"Reanimated Runtime")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"Reanimated Runtime experimental\n(Improved Chrome Reloads)"),", but we recommend the latter."),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Debugging relies on source maps that are generated by the Reanimated Babel plugin, so you\nmight have to run ",(0,l.kt)("inlineCode",{parentName:"em"},"yarn start --reset-cache")," for those changes to take effect.\nIn case it still doesn't work after that please reinstall the app and reset metro\ncache once again.")),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"Known issues include:"),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Reloads don't work - if a debugger is connected to the Reanimated runtime while\nthe reload is performed, the app will crash (both on Android and iOS)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"On iOS, a breakpoint can't be set in a line where a breakpoint was previously\nset and then removed")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"On iOS, breakpoint labels are not visible")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The profiler does not work (it is not possible to stop the recording) - this is an issue with Hermes and is not related\nto Reanimated and has been already fixed in this ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/facebook/react-native/pull/34129"},"PR"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The console is unresponsive if there are no animations running (this will be fixed in the near future)"))),(0,l.kt)("p",{parentName:"admonition"},"These issues ",(0,l.kt)("strong",{parentName:"p"},"do not")," affect release builds as well as debug builds where the debugger connection\nis closed while performing a reload or the debugger is not used at all.")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"We are actively working on improving the debugging experience with Chrome DevTools on Hermes.")),(0,l.kt)("h3",{id:"flipper-hermes-debugger"},"Flipper (Hermes debugger)"),(0,l.kt)(h,{mdxType:"FlipperTable"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Summary:"),"\nWorks and both contexts can be debugged."),(0,l.kt)("admonition",{type:"warning"},(0,l.kt)("p",{parentName:"admonition"},"This is an early experimental feature.")),(0,l.kt)("p",null,"Worklet debugging is now available in Reanimated apps as an early experimental\nfeature. If you want to try it out follow these steps:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Add the ",(0,l.kt)("inlineCode",{parentName:"p"},"patch-package")," to your project and set it up to run as a ",(0,l.kt)("inlineCode",{parentName:"p"},"post-install")," task.\nMore details can be found ",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/patch-package"},"here"),";")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"Add the necessary patches to the ",(0,l.kt)("inlineCode",{parentName:"p"},"patches/")," folder:"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{target:"_blank",href:a(6090).Z},"this")," patch for ",(0,l.kt)("inlineCode",{parentName:"li"},"metro-inspector-proxy"),","),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{target:"_blank",href:a(571).Z},"this")," one for ",(0,l.kt)("inlineCode",{parentName:"li"},"react-native-gesture-handler"),"\n(not necessary for ",(0,l.kt)("inlineCode",{parentName:"li"},"react-native-gesture-handler")," 2.7.0 or newer).")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Warnings about mismatched patch versions can be safely ignored if the patch was successfully applied.")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"Install the ",(0,l.kt)("inlineCode",{parentName:"li"},"reanimated")," plugin in Flipper.")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Screenshot showing where the plugin management panel is in Flipper",src:a(3951).Z,width:"2374",height:"1436"}),"\n",(0,l.kt)("img",{alt:"Screenshot showing where the install button for plugins is",src:a(104).Z,width:"2374",height:"1436"})),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},"Select the plugin from the side menu (it might be disabled) and you should\nbe good to go!")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Screenshot showing the plugin working",src:a(1476).Z,width:"2374",height:"1436"})),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Debugging relies on source maps that are generated by the Reanimated Babel plugin, so you\nmight have to run ",(0,l.kt)("inlineCode",{parentName:"em"},"yarn start --reset-cache")," for those changes to take effect.\nIn case it still doesn't work after that please reinstall the app and reset metro\ncache once again.")),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"Known issues include:"),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Reloads don't work - if a debugger is connected to the Reanimated runtime while\nthe reload is performed, the app will crash (both on Android and iOS)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Breakpoints might not be active after a reload even though they look as if they\nwere")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Android app crashes after the Flipper client is closed and will crash on startup\nafter that. This is a known Flipper issue (",(0,l.kt)("a",{parentName:"p",href:"https://github.com/facebook/flipper/issues/3026"},"link"),")\nand is not related to Reanimated.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The profiler does not work (it is not possible to stop the recording) - this is an issue with Hermes and is not related\nto Reanimated and has been already fixed in this ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/facebook/react-native/pull/34129"},"PR"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The console is unresponsive if there are no animations running (this will be fixed in the near future)"))),(0,l.kt)("p",{parentName:"admonition"},"These issues ",(0,l.kt)("strong",{parentName:"p"},"do not")," affect release builds as well as debug builds where the debugger connection\nis closed while performing a reload or the debugger is not used at all.")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"We are actively working on improving the debugging experience with Flipper on Hermes.")),(0,l.kt)("h3",{id:"safari-devtools"},"Safari DevTools"),(0,l.kt)(g,{mdxType:"SafariDevToolsTable"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Summary:"),"\nSafari DevTools is only available on iOS devices running the JSC engine.\nWorklet debugging is available."),(0,l.kt)("p",null,"After opening Safari and configuring it as specified in the React Native\ndocs, under ",(0,l.kt)("inlineCode",{parentName:"p"},"Develop > Device")," you'll see two JSC contexts\nlike in the screenshot below:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Screenshot showing Safari&#39;s Develop menu options",src:a(3054).Z,width:"1672",height:"450"})),(0,l.kt)("p",null,"The order of the contexts is random, but one of them will be the main JS context.\nAll ",(0,l.kt)("inlineCode",{parentName:"p"},"console.log")," outputs will appear in the console of this context. You can also\nset breakpoints here, but unfortunately the only source file visible is the\ntransformed ",(0,l.kt)("inlineCode",{parentName:"p"},"indexjs.bundle")," which does make things more difficult to find."),(0,l.kt)("p",null,"The other option will be the UI context. No console logs will appear in\nthe console of this context, but all worklet functions should be visible\nas separate files. It is also possible to set breakpoints in these\nworklets."),(0,l.kt)("h3",{id:"react-developer-tools"},"React Developer Tools"),(0,l.kt)(k,{mdxType:"ReactDeveloperToolsTable"}),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Summary:"),"\nReact Developer Tools work as expected, and the profiler and layout inspector can\nbe used as usual."),(0,l.kt)("p",null,"On Android, remember to first run the command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"adb reverse tcp:8097 tcp:8097\n")))}y.isMDXComponent=!0},3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),m=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=m(a),u=r,h=d["".concat(s,".").concat(u)]||d[u]||p[u]||l;return a?n.createElement(h,i(i({ref:t},c),{},{components:a})):n.createElement(h,i({ref:t},c))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var m=2;m<l;m++)i[m]=a[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},6090:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.72.1-566ede6038f0352da95465c3e0fe2a0e.patch"},8849:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.72.3-566ede6038f0352da95465c3e0fe2a0e.patch"},6980:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.73.5-8292e6f466bf3f4fe6e336fc75cff451.patch"},5174:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.73.7-44c667919bf10ec4269b1f7f4eac6bce.patch"},4371:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.76.0-52a2a7e0fd6ad0145d523a5c2c2546d4.patch"},1585:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.76.4-aeac93751b6cd5f810fd28277ad8fbc5.patch"},5714:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.76.5-aeac93751b6cd5f810fd28277ad8fbc5.patch"},8673:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/metro-inspector-proxy+0.76.7-642c3c16064362e16581686ccea79c9e.patch"},571:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/react-native-gesture-handler+2.5.0-f280ea2bd047035dd1c96fb296eb1072.patch"},258:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/ChromeDevToolsList-89b68e34a90c132ce9872d5a6a802902.png"},3054:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/SafariJSCiOS-d90d5abef6bf2043c03a3044aef6049d.png"},3951:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/flipper1-028d8d2865b7ede12447c6511eb8f6e0.png"},104:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/flipper2-5136f9cc05fedcc6d517ec7e8c9af8b0.png"},1476:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/flipper3-f82d446a28e6550ddb1392dfa774e796.png"}}]);