<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.x plugin-docs plugin-id-default docs-doc-id-about">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">About React Native Reanimated | React Native Reanimated</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://software-mansion-labs.github.io/reanimated-legacy-docs/docs/1.x/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.x"><meta data-rh="true" name="docsearch:version" content="1.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.x"><meta data-rh="true" property="og:title" content="About React Native Reanimated | React Native Reanimated"><meta data-rh="true" name="description" content="React Native&#x27;s Animated library reimplemented."><meta data-rh="true" property="og:description" content="React Native&#x27;s Animated library reimplemented."><link data-rh="true" rel="icon" href="/reanimated-legacy-docs/img/SWM_Fav_192x192.png"><link data-rh="true" rel="canonical" href="https://software-mansion-labs.github.io/reanimated-legacy-docs/docs/1.x/"><link data-rh="true" rel="alternate" href="https://software-mansion-labs.github.io/reanimated-legacy-docs/docs/1.x/" hreflang="en"><link data-rh="true" rel="alternate" href="https://software-mansion-labs.github.io/reanimated-legacy-docs/docs/1.x/" hreflang="x-default"><link rel="stylesheet" href="/reanimated-legacy-docs/assets/css/styles.bc496982.css">
<link rel="preload" href="/reanimated-legacy-docs/assets/js/runtime~main.a0665e86.js" as="script">
<link rel="preload" href="/reanimated-legacy-docs/assets/js/main.73b98f85.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reanimated-legacy-docs/"><b class="navbar__title text--truncate">React Native Reanimated</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/reanimated-legacy-docs/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/reanimated-legacy-docs/docs/1.x/">1.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/reanimated-legacy-docs/docs/">3.x</a></li><li><a class="dropdown__link" href="/reanimated-legacy-docs/docs/2.x/">2.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/reanimated-legacy-docs/docs/1.x/">1.x</a></li></ul></div><div class="searchBox_ZlJk"></div><a href="https://github.com/software-mansion/react-native-reanimated/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-navbar-logo">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/reanimated-legacy-docs/docs/1.x/">Overview</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reanimated-legacy-docs/docs/1.x/">About</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reanimated-legacy-docs/docs/1.x/getting_started">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reanimated-legacy-docs/docs/1.x/declarative">Declarative Animation API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reanimated-legacy-docs/docs/1.x/examples">Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reanimated-legacy-docs/docs/1.x/transitions">Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reanimated-legacy-docs/docs/1.x/config">Additional configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/reanimated-legacy-docs/docs/1.x/value">Features</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->React Native Reanimated<!-- --> <b>1.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/reanimated-legacy-docs/docs/">latest version</a></b> (<!-- -->3.x<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/reanimated-legacy-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Overview</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">About</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>About React Native Reanimated</h1></header><p>React Native&#x27;s Animated library reimplemented.</p><ul><li><strong>Native Performance</strong>: Declare your animations in JS, but have them run on the native thread! üßô‚Äç‚ôÇÔ∏è</li><li><strong>Precise Animations</strong>: The API affords new levels of precision and detailed control of your animations. üïπ</li><li><strong>(mostly) Backwards Compatible</strong>: Use the same Animated API from React Native that you&#x27;ve been using. You generally don&#x27;t <em>need</em> to change anything to get started. üëç</li></ul><p>Reanimated provides a more comprehensive, low level abstraction for the Animated library API, giving you much greater flexibility, control and performance. Combine it with <a href="https://github.com/kmagiera/react-native-gesture-handler" target="_blank" rel="noopener noreferrer">react-native-gesture-handler</a> for performant gesture-based interactions.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">‚Äã</a></h3><p><code>Animated</code> library has several limitations that become troubling when it comes to gesture based interactions.
This project was initially created to resolve the issue of pan interaction when the object can be dragged along the screen and when released it should snap to some place on the screen.
The problem was that despite using <code>Animated.event</code> and mapping gesture state to the position of the box, and making this whole interaction run on UI thread with <code>useNativeDriver</code> flag, we still had to call back into JS at the end of the gesture for us to start &quot;snap&quot; animation.
This is because <code>Animated.spring({}).start()</code> cannot be used in a &quot;declarative&quot; manner, because when it gets executed it has a &quot;side effect&quot; of starting a process (an animation) that updates the value for some time.
Adding &quot;side effect&quot; nodes into the current Animated implementation turned out to be a pretty difficult task as the execution model of the Animated API runs all the dependent nodes of each frame for the views that need to update.
We don&#x27;t want to run &quot;side effects&quot; more often than necessary as it would, for example, result in the animation starting multiple times.</p><p>Another inspiration to redesigning the internals of <code>Animated</code> was Krzysztof&#x27;s work on porting &quot;Animated Tracking&quot; functionality to the native driver.
Apparently, even though the native driver is out for quite a while, it still does not support all the things non-native <code>Animated</code> lib can do.
Obviously, it is far more difficult to build three versions of each feature (JS, Android and iOS) instead of one, and the same applies for fixing bugs.
One of the goals of <code>react-native-reanimated</code> was to provide a more generic building block for the API that would allow for building more complex features only in JS and make the native codebase as minimal as possible.
Taking &quot;diffClamp&quot; node as an example, it is currently implemented in three different places in <code>Animated</code> core and even though it is pretty useful it actually only has one use case (collapsible scrollview header).</p><p>On a similar topic, there&#x27;s React Native&#x27;s PR <a href="https://github.com/facebook/react-native/pull/18029" target="_blank" rel="noopener noreferrer">#18029</a> and even though it provides a legitimate use case, maintainers are hesitant about merging it. The <code>Animated</code> API shouldn&#x27;t block people from building things like this and the goal of <code>react-native-reanimated</code> is to provide lower level access that would allow for implementing that and many more features with no necessary changes to the core of the library.</p><p>You can watch Krzysztof Magiera&#x27;s <a href="https://www.youtube.com/watch?v=kdq4z2708VM" target="_blank" rel="noopener noreferrer">React Europe talk</a> where he explains the motivation.</p><p>The goals:</p><ul><li>More generic primitive node types leading to more code reuse for the library internals therefore making it easier to add new features and fix bugs.</li><li>The new set of base nodes can be used to implement <code>Animated</code> compatible API including:<ul><li>Complex nodes such as ‚ÄúdiffClamp‚Äù.</li><li>Interactions such as animated value tracking or animation staggering.</li></ul></li><li>Conditional evaluation &amp; nodes with side effects (<code>set</code>, <code>startClock</code>, <code>stopClock</code>).</li><li>No more ‚ÄúuseNativeDriver‚Äù ‚Äì all animations runs on the UI thread by default</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reanimated-overview">Reanimated overview<a href="#reanimated-overview" class="hash-link" aria-label="Direct link to Reanimated overview" title="Direct link to Reanimated overview">‚Äã</a></h3><p>We aim to bring this project to be fully compatible with <code>Animated</code> API. We believe that the set of base nodes we have selected should make this possible to be done only by writing JS code and does not require significant changes in the native codebases. Here is a list of things that haven&#x27;t yet been ported from the original version of <code>Animated</code> library.
All the functionality that missing elements provide in <code>Animated</code> can already be achieved with <code>react-native-reanimated</code> although a different methodology for implementing those may be required (e.g. check <a href="/reanimated-legacy-docs/docs/1.x/declarative">&quot;Declarative Animation API&quot; section</a> to see how the implementation may differ).</p><ul><li>using value offsets</li><li>value tracking (can be achieved in different way, <code>react-native-reanimated</code> also allows for tracking all the animation parameters not only destination params)</li><li>animation staggering</li><li>animation delays</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="at-most-once-evaluation-the-algorithm">At most once evaluation (the algorithm)<a href="#at-most-once-evaluation-the-algorithm" class="hash-link" aria-label="Direct link to At most once evaluation (the algorithm)" title="Direct link to At most once evaluation (the algorithm)">‚Äã</a></h3><p>Unlike the original <code>Animated</code> library where each node could have been evaluated many times within a single frame, <code>react-native-reanimated</code> restricts each node to be evaluated at most once in a frame.
This restriction is required for nodes that have side-effects to be used (e.g. <a href="/reanimated-legacy-docs/docs/1.x/nodes/set"><code>set</code></a> or <a href="/reanimated-legacy-docs/docs/1.x/nodes/startClock"><code>startClock</code></a>).
When node is evaluated (e.g. in case of an <a href="/reanimated-legacy-docs/docs/1.x/nodes/add"><code>add</code></a> node we want to get a sum of the input nodes) its value is cached. If within the next frame there are other nodes that want to use the output of that node instead of evaluating we return cached value.
This notion also helps with performance as we can try to evaluate as few nodes as expected.
The current algorithm for making decisions of which nodes to evaluate works as follows:</p><ol><li>For each frame we first analyze the generated events (e.g. touch stream). It is possible that events may update some animated values.</li><li>Then we update values that correspond to <a href="/reanimated-legacy-docs/docs/1.x/clock">clock</a> nodes that are &quot;running&quot;.</li><li>We traverse the node&#x27;s tree starting from the nodes that have been updated in the current cycle and we look for final nodes that are connected to views.</li><li>If we found nodes connected to view properties we evaluate them. This can recursively trigger an evaluation for their input nodes etc.</li><li>After everything is done we check if some &quot;running&quot; clocks exists. If so we enqueue a callback to be evaluated with the next frame and start over from pt 1. Otherwise we do nothing.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="100-declarative-gesture-interactions">100% declarative gesture interactions<a href="#100-declarative-gesture-interactions" class="hash-link" aria-label="Direct link to 100% declarative gesture interactions" title="Direct link to 100% declarative gesture interactions">‚Äã</a></h3><p><code>react-native-reanimated</code> works best with the <a href="https://kmagiera.github.io/react-native-gesture-handler" target="_blank" rel="noopener noreferrer">Gesture Handler</a>
library. Currently all the examples are made using that library, including the ultimate
<a href="https://github.com/software-mansion/react-native-reanimated/blob/main/Example/src/imageViewer" target="_blank" rel="noopener noreferrer">ImagePreview app</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/reanimated-legacy-docs/docs/1.x/getting_started"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Getting started</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#reanimated-overview" class="table-of-contents__link toc-highlight">Reanimated overview</a></li><li><a href="#at-most-once-evaluation-the-algorithm" class="table-of-contents__link toc-highlight">At most once evaluation (the algorithm)</a></li><li><a href="#100-declarative-gesture-interactions" class="table-of-contents__link toc-highlight">100% declarative gesture interactions</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://swmansion.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_fGS1"><img src="/reanimated-legacy-docs/img/swmLogo.svg" alt="Software Mansion" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/reanimated-legacy-docs/img/swmLogo.svg" alt="Software Mansion" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div></div></div></footer></div>
<script src="/reanimated-legacy-docs/assets/js/runtime~main.a0665e86.js"></script>
<script src="/reanimated-legacy-docs/assets/js/main.73b98f85.js"></script>
</body>
</html>